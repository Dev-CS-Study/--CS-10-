# 네트워크란 무엇일까?

---

#### IP 주소
    인터넷에 연결되기 위해 필요한 인터넷 상의 주소

#### Modem (모뎀)
    네트워크 통신에 필요한 신호 변환 장치

#### Home Router (공유기)
- 여러 기기들을 인터넷에 연결될 수 있도록 하는 장치
- 하나의 IP 주소로도 동시에 인터넷을 사용하는 것이 가능
- 공유기에 연결된 기기들은 같은 네트워크 소속

#### Switch (스위치)
- 같은 네트워크 내의 기기들이 서로 통신할 수 있도록 하는 장치
- 보통 공유기의 LAN Port 수가 부족할 때 사용
- `Switching Hub` 혹은 `Hub`라고 불린다.

---

### Network
> 컴퓨터나 기타 기기들이 리소스를 공유하거나 데이터를 주고 받기 위해 유선 혹은 무선으로 연결된 통신 체계
- 기능
  - 애플리케이션 목적에 맞는 통신 방법 제공
  - 신뢰할 수 있는 데이터 전송 방법 제공
  - 네트워크 간의 최적 통신 경로 결정
  - 목적지로 데이터 전송
  - 노드 사이의 데이터 전송
- 위 기능들을 단 하나의 프로토콜로 구현할 수 있을까?
  - 가능은 하겠지만, 너무 비효율적이다. 때문에, 모듈화를 해서 구현해야 하는데 어떻게 모듈화할까?
    - 각 기능이 계층별로 동작하는 것처럼 보인다.
    - 그래서 나온 것이 `OSI Model (7 Layer)` 과 `TCP/IP Stack (4 Layer)` 이다.

#### Network Protocol 
> 기능을 위해 통신 기능이 제대로 동작하기 위해서는 참여자들 사이에서 약속된 통신 방법이 있어야 한다.
- 네트워크 통신을 하기 위해서 통신에 참여하는 주체들이 따라야 하는 형식, 절차, 규약

#### LAN (Local Area Network)
  - 집, 학교, 회사 건물 등 제한된 범위 내에서 컴퓨터나 기타 기기들을 연결해서 데이터나 리소스를 공유할 수 있게 하는 네트워크
  - Ex) Ethernet : 유선 통신 (이더넷)
  - Ex) Wireless LAN : 무선 통신 (Wifi)

#### WAN (Wide Area Network)
  - 여러 `LAN`이나 다른 종류의 네트워크들을 하나로 묶어서 멀리 떨어진 기기들도 통신이 가능하도록 만든 네트워크
  - Ex) 은행의 ATM, Wireless WAN, Internet

---

### Internet
- 네트워크들의 네트워크이다.
- 세계에서 가장 큰 `WAN`이다.
- Global Network 라고도 불린다.

#### ISP (Internet Service Provider)
- 일반 사용자나 회사, 기관 등이 인터넷을 사용할 수 있도록 인터넷 연결 서비스를 제공하는 존재
- Ex) KT, SKT 등
- 역할과 규모에 따라 `Tier`가 나뉜다.
  - **tier 1**
    - 국제 범위의 네트워크를 보유
    - 인터넷의 모든 네트워크 접근 가능
    - 인터넷 중추 역할. 즉, `Backbone`으로 불린다.
    - 트래픽 전송 비용이 없다.
  - **tier 2**
    - 국가/지방 범위 네트워크 보유
    - 예를 들어, KT, SKT 등이 해당
    - 일반 사용자나 기업 대상 서비스
    - 인터넷의 모든 영역에 연결되기 위해 `tier 1 ISP`에 비용을 내고 트래픽 전송
  - **tier 3**
    - 작은 지역 범위 서비스 제공
    - 일반 사용자나 기업 대상 서비스
    - 상위 `ISP`들에게 비용을 내고 인터넷 트래픽을 구매해서 이를 통해 서비스
- **내가 가입한 `ISP`를 통해 어떻게 인터넷에 있는 다른 컴퓨터와 통신할 수 있는 걸까?**
    - 인터넷 코어 부분은 내부적으로 다양한 ISP 들이 서로 연결이 되어 있어서 통신이 가능하다.
- **ISP 네트워크 간에는 어떻게 연결되는 걸까?**
    - Router (라우터) : 목적하는 네트워크에 데이터를 보내는 장치
    - 즉, 라우터가 서로 다른 `ISP`가 관리하는 네트워크를 연결시켜주는 역할을 한다.

---

### Node (노드)
- 네트워크를 이루는 모든 장치

#### End System, Host (호스트)
- 네트워크 끝에 있는 노드
- 네트워크를 사용하기 위해 연결된 노드
- 클라이언트와 서버로 나뉜다.
    - **클라이언트** : 다른 호스트의 데이터나 리소스를 요청하는 호스트
    - **서버** : 다른 호스트에게 서비스를 제공하는 호스트로 요청에 따라 데이터나 리소스를 제공

---

### OSI 7 Layer
- 각 계층에 맞게 프로토콜이 세분화돼서 구현
- 각 계층의 프로토콜은 하위 계층의 프로토콜이 제공하는 기능을 사용하여 동작
- 사실 `Application, Presentation, Session Layer`은 하나로 보는 것이 좋다고 생각

#### Application Layer - L7
- 애플리케이션 목적에 맞는 통신 방법을 제공
- Ex) HTTP, DNS, SMTP, FTP

####  Presentation Layer - L6
- 애플리케이션 간의 통신에서 메시지 포맷 관리
- Ex) `인코딩 <-> 디코딩` / `암호화 <-> 복호화` / `압축 <-> 압축 풀기` 

####  Session Layer - L5
- 애플리케이션 간의 통신에서 세션을 관리
- RPC (Remote Procedure Call)

####  Transport Layer - L4
- 애플리케이션 간의 통신 담당
- 목적지 애플리케이션으로 데이터 전송
- TCP - 안정적이고 신뢰할 수 있는 데이터 전송 보장
- UDP - 필수 기능만 제공

####  Network Layer - L3
- Host 간 통신 담당
- 목적지 호스트로 데이터 전송
- 네트워크 간의 최적 경로 결정 (Router)
- Ex) IP

####  Data Link Layer - L2
- 직접 연결된 노드 간의 통신 담당
- MAC 주소 기반 통신
- Ex) ARP : IP 주소를 MAC 주소로 변환해주는 프로토콜

####  Physical Layer - L1
- Bit 단위로 데이터 전송

#### 통신 흐름
1. 유튜브 영상에 댓글을 작성
2. 애플리케이션 계층 역할 수행 -> 발생한 정보를 헤더에 저장 -> `데이터1 = 헤더 + 메시지`로 묶어서 해당 데이터를 표현 계층으로 전송
3. 표현 계층 역할 수행 -> 발생한 정보를 헤더에 저장 -> `데이터2 = 헤더 + 데이터1`로 묶어서 해당 데이터를 세션 계층으로 전송
4. 세션 계층 역할 수행 -> 발생한 정보를 헤더에 저장 -> `데이터3 = 헤더 + 데이터2`로 묶어서 해당 데이터를 전송 계층으로 전송
5. 전송 계층 역할 수행 -> 발생한 정보를 헤더에 저장 -> `데이터4 = 헤더 + 데이터3`로 묶어서 해당 데이터를 전송 계층으로 전송
6. 네트워크 계층 역할 수행 -> 목적지 IP 주소 확인 등의 발생한 정보를 헤더에 저장 -> `데이터5 = 헤더 + 데이터4`로 묶어서 해당 데이터를 데이터 링크 계층으로 전송
7. 데이터 링크 계층 역할 수행 -> 발생한 정보를 헤더와 트레일러에 저장 -> `데이터6 = 헤더 + 데이터5`로 묶어서 해당 데이터를 물리 계층으로 전송
   - 트레일러 : 전송 후 에러가 없었는 지 확인하는 용도
8. 물리 계층 역할 수행 -> 데이터6을 비트 단위로 다른 라우터로 전송
9. 라우터의 물리 계층에서 비트 단위로 전송 받은 데이터를 다시 합쳐서 데이터 링크 계층으로 올려준다.
10. 라우터의 데이터 링크 계층에서 헤더와 트레일러를 확인해서 문제가 없으면 띠어낸다 -> 그리고 다시 네트워크 계층으로 데이터5를 올린다.
11. 라우터의 네트워크 계층은 다음으로 이동해야 하는 노드 정보를 확인 후 다시 데이터 링크 계층으로 내려준다.
12. 그리고 똑같이 데이터6으로 만들어서 물리 계층으로 보내고 이를 계속해서 반복한다.
13. 마지막으로 최종 목적지에 도착하면 헤더를 하나씩 떼어내면서 해당 헤더에 들어있는 정보를 가지고 해당 계층에서 정보에 맞게 수행한다.
14. 그리고 마지막에 남은 헤더와 데이터를 애플리케이션 계층에서 사용하는 것이다.

---

[참조] 
- https://www.youtube.com/watch?v=oFKYzp6gGfc&list=PLcXyemr8ZeoSGlzhlw4gmpNGicIL4kMcX
